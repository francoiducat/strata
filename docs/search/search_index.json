{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"],"fields":{"title":{"boost":1000.0},"text":{"boost":1.0},"tags":{"boost":1000000.0}}},"docs":[{"location":"","title":"\ud83c\udf33 Strata Documentation","text":"<ul> <li> <p> Discover Strata App</p> <ul> <li>Overview</li> <li>Features</li> <li>Use cases</li> </ul> </li> <li> <p> Developer Docs</p> <ul> <li>Tech Stack </li> <li>Architecture overview</li> <li>Alembic Migrations</li> </ul> </li> <li> <p> __Quick start guide</p> <ul> <li>Quick start guide</li> <li>Use cases</li> <li>Database Model</li> </ul> </li> </ul>"},{"location":"#license","title":"License","text":"<p>GPL 3.0</p>"},{"location":"Alembic/","title":"Alembic Migrations","text":""},{"location":"Alembic/#why-alembic","title":"Why Alembic ?","text":"<p>Alembic is a database migration tool for SQLAlchemy. Main reasons to use Alembic are:</p> Explanation Promise Versioning Database schema management over time. Every schema change is tracked and reversible. Consistency Same migration workflow across environments. Dev, qualif, prod databases stay in sync with SQLAlchemy models. Safety Structured way to evolve the database schema as the application grows. No more accidental schema drift or manual database changes. Collaboration Improved collaboaration. Multiple developers can work on the same database schema without conflicts."},{"location":"Alembic/#how-to-use-alembic","title":"How to Use Alembic ?","text":""},{"location":"Alembic/#1-initialisation-first-time-setup","title":"1. Initialisation (First-Time Setup)","text":"<p>Set up the migration environment:</p> <p>1.1 Go to the directory where you want your alembic migration folder:</p> <pre><code>   cd /where/alembic/ini/is/located\n</code></pre> <p>1.2 Run the Alembic init command:</p> <pre><code>   alembic init migrations\n</code></pre> <p>This will create a folder with all necessary template files:</p> <ul> <li><code>env.py</code>: Configuration for Alembic's migration.</li> <li><code>script.py.mako</code>: Template for generating migration scripts.</li> <li><code>versions/</code>: Directory where migration scripts are stored.</li> </ul>"},{"location":"Alembic/#2-bringing-your-schema-under-alembic-control","title":"2. Bringing Your Schema Under Alembic Control","text":"<p>If you are starting from scratch or have an existing database with no Alembic migrations, you must create an initial migration. This migration will represent the current state of your models and database.</p>"},{"location":"Alembic/#21-make-sure-your-models-are-up-to-date","title":"2.1 Make Sure Your Models Are Up to Date","text":"<ul> <li>Ensure all your SQLAlchemy models reflect the tables and columns you want in your database.</li> </ul>"},{"location":"Alembic/#22-create-the-initial-migration","title":"2.2 Create the Initial Migration","text":"<p>Run this command from your project root:</p> <pre><code>alembic revision --autogenerate -m \"Initial migration\"\n</code></pre> <p>This will generate a migration script in <code>versions/</code>.</p> <p>Review the script to ensure it matches your intended schema.</p>"},{"location":"Alembic/#23-apply-the-migration","title":"2.3 Apply the Migration","text":"<p>Apply the migration to your database:</p> <pre><code>alembic upgrade head\n</code></pre>"},{"location":"Alembic/#3-typical-alembic-workflow","title":"3. Typical Alembic Workflow","text":"<p>3.1 Edit your SQLAlchemy models.</p> <p>3.2 Create initiatial migration:</p> <pre><code>   alembic revision --autogenerate -m \"Initial migration\"\n</code></pre> <p>\ud83d\udca1This command auto-generates the migration file by comparing your SQLAlchemy models to the current state of the database.</p> <p>3.3 Adding a Second Migration (add, remove, or modify tables/columns)</p> <p>Option A: Generate a migration automatically on SQLAlchemy Model Changes</p> <p>If you make further changes to your SQLAlchemy models (e.g., adding a new column).</p> <ul> <li>Generate the migration:</li> </ul> <pre><code>alembic revision --autogenerate -m \"Add new column to asset table\"\n</code></pre> <p>Alembic will detect the changes and populate the <code>upgrade()</code> and <code>downgrade()</code> methods with the necessary SQLAlchemy operations.</p> <p>2ec8169a394e_initial_schema_with_all_tables.py</p> <p>Review the generated migration file to ensure it correctly captures your intended changes.</p> <p>Option B: Create manual migration.</p> <p>For custom operations like data seeding, complex transformations etc. </p> <ul> <li>Create an empty migration skeleton</li> </ul> <pre><code>alembic revision -m \"Seed asset types reference data\"\n</code></pre> <p>7de8469a594f_seed_asset_types_reference_data.py</p> <p>Review the created migration file with empty <code>upgrade()</code> and <code>downgrade()</code> methods. Manually edit these functions to include your logic.</p> <p>Example: seeding <code>asset_types</code> reference data:</p> <pre><code>def upgrade():\n    # Example: Insert reference data into the asset_types table\n    op.bulk_insert(\n        asset_types_table,\n        [\n            {\"id\": 1, \"name\": \"CHECKING_ACCOUNTS\"},\n            {\"id\": 2, \"name\": \"SAVINGS_ACCOUNTS\"},\n            {\"id\": 3, \"name\": \"REAL_ESTATE\"},\n        ],\n    )\n\ndef downgrade():\n    # Example: Remove the seeded data\n    op.execute(\"DELETE FROM asset_types WHERE id IN (1, 2, 3)\")\n</code></pre> <p>3.4 Apply the migration:</p> <pre><code>alembic upgrade head\n</code></pre>"},{"location":"Alembic/#useful-alembic-commands","title":"Useful Alembic Commands","text":"<ul> <li>Check current migration state:</li> </ul> <pre><code>  alembic current\n</code></pre> <ul> <li>Rollback last migration:</li> </ul> <pre><code>  alembic downgrade -1\n</code></pre> <ul> <li>Stamp the database (mark as up-to-date without running migrations):</li> </ul> <pre><code>  alembic stamp head\n</code></pre> <ul> <li>Show migration history:</li> </ul> <pre><code>  alembic history\n</code></pre> <ul> <li>Usage with poetry:</li> </ul> <pre><code>  poetry run alembic revision --autogenerate -m \"Migration message\"\n  poetry run alembic upgrade head\n</code></pre>"},{"location":"Architecture/","title":"\ud83c\udfd7\ufe0f Hexagonal Architecture with FastAPI","text":"<p>This document outlines the architecture of the Strata backend, built with FastAPI and following Hexagonal Architecture (Ports &amp; Adapters). This design ensures modularity, testability, and maintainability.</p>"},{"location":"Architecture/#core-principles","title":"Core Principles","text":"<ol> <li>Separation of Concerns: Distinct layers with clear responsibilities.</li> <li>Dependency Inversion: The core logic (the \"hexagon\") is independent of frameworks and external tech. It defines \"ports\" (interfaces), and adapters implement these ports.</li> <li>Testability: Business rules are decoupled from infrastructure, making them easy to test.</li> </ol>"},{"location":"Architecture/#back-end-directory-structure","title":"Back End Directory Structure","text":"<pre><code>backend/\n\u251c\u2500\u2500 Dockerfile\n\u251c\u2500\u2500 alembic                    # Alembic folder\n\u2502 \u251c\u2500\u2500 README\n\u2502 \u251c\u2500\u2500 env.py\n\u2502 \u251c\u2500\u2500 script.py.mako  \n\u2502 \u2514\u2500\u2500 versions                 # Alembic migration scripts\n\u251c\u2500\u2500 alembic.ini\n\u251c\u2500\u2500 app                        # Main application folder\n\u2502 \u251c\u2500\u2500 adapters                                                    \n\u2502 \u2502 \u251c\u2500\u2500 incoming               # Primary interactions: FastAPI app, routers, schemas, and mappers\n\u2502 \u2502 \u2514\u2500\u2500 outgoing               # Persistence layer, Entity Models, Mappers, SQLAlchemy repository implementations.\n\u2502 \u251c\u2500\u2500 application              # Orchestration layer (use cases), depends on domain ports\n\u2502 \u2502 \u2514\u2500\u2500 use_cases\n\u2502 \u251c\u2500\u2500 domain                   # The core business logic (the \"hexagon\")\n\u2502 \u2502 \u251c\u2500\u2500 entities               # Business entities\n\u2502 \u2502 \u251c\u2500\u2500 exceptions\n\u2502 \u2502 \u2514\u2500\u2500 ports                  # Interfaces for repositories (IAssetRepository.py) and services \n\u2502 \u2514\u2500\u2500 main.py\n\u251c\u2500\u2500 poetry.lock\n\u251c\u2500\u2500 pyproject.toml\n\u2514\u2500\u2500 scripts                    # Utility scripts\n</code></pre>"},{"location":"Architecture/#application-entrypoint-configuration","title":"Application Entrypoint &amp; Configuration","text":"<ul> <li>main.py: (<code>backend/app/main.py</code>).</li> <li>alembic/versions: Alembic migrations for DB schema.</li> </ul>"},{"location":"DataModel/","title":"Data Model","text":""},{"location":"DataModel/#entity-relationship-diagram-database-orm","title":"Entity-Relationship Diagram (Database / ORM)","text":"<p>\ud83d\udc49 Persistence-oriented <pre><code>erDiagram\n    PORTFOLIO ||--o{ ASSET : owns\n    PORTFOLIO ||--o{ PORTFOLIO_SNAPSHOT : \"has (auto-calculated)\"\n\n    ASSET ||--o{ TRANSACTION : has\n    ASSET ||--o{ ASSET_SNAPSHOT : \"has (manually entered)\"\n    ASSET }o--|| ASSET_TYPE : \"typed as\"\n    ASSET }o--o{ ASSET_CATEGORY : \"\"\n    ASSET_CATEGORY }o--|| CATEGORY : \"\"\n    ASSET }o--o{ ASSET_TAG : \"\"\n    ASSET_TAG }o--|| TAG : \"\"\n\n    PORTFOLIO {\n        uuid id PK\n        string name\n        string base_currency\n        datetime created_at\n        datetime updated_at\n    }\n\n    PORTFOLIO_SNAPSHOT {\n        uuid id PK\n        uuid portfolio_id FK\n        decimal value\n        datetime observed_at\n    }\n\n    ASSET {\n        uuid id PK\n        uuid portfolio_id FK\n        uuid asset_type_id FK\n        string name\n        decimal quantity\n        boolean disposed\n        datetime created_at\n        datetime updated_at\n        string created_by\n        string updated_by\n    }\n\n    ASSET_SNAPSHOT {\n        uuid id PK\n        uuid asset_id FK\n        decimal value\n        datetime observed_at\n    }\n\n    TRANSACTION {\n        uuid id PK\n        uuid asset_id FK\n        string type\n        decimal unit_price\n        decimal quantity\n        string currency\n        datetime occurred_at\n    }\n\n    ASSET_TYPE {\n        uuid id PK\n        string code UK\n        string label\n        datetime created_at\n        datetime updated_at\n    }\n\n    CATEGORY {\n        uuid id PK\n        string name UK\n        uuid parent_id FK\n    }\n\n    TAG {\n        uuid id PK\n        string name UK\n    }\n\n    ASSET_CATEGORY {\n        uuid asset_id FK\n        uuid category_id FK\n    }\n\n    ASSET_TAG {\n        uuid asset_id FK\n        uuid tag_id FK\n    }</code></pre></p>"},{"location":"DataModel/#conceptual-data-model","title":"Conceptual Data Model","text":"<p>\ud83d\udc49 Behavior-oriented</p> <pre><code>classDiagram\n\n    class Portfolio {\n        +id: UUID\n        +name: str\n        +base_currency: str\n        +assets: List[Asset]\n        +snapshots: List[PortfolioSnapshot]\n\n        +total_value(at: datetime): Decimal\n        +take_snapshot(at: datetime): PortfolioSnapshot\n        +get_currency(): str\n    }\n\n    class AssetType {\n        +id: UUID\n        +code: str\n        +label: str\n    }\n\n    class Category {\n        +id: UUID\n        +name: str\n        +parent: Category?\n\n        +get_hierarchy(): List[Category]\n        +get_all_assets(): List[Asset]\n    }\n\n    class Asset {\n        +id: UUID\n        +name: str\n        +asset_type: AssetType\n        +portfolio: Portfolio\n        +categories: Set[Category]\n        +quantity: Decimal?\n        +disposed: bool\n        +created_at: datetime\n        +updated_at: datetime\n        +created_by: str\n        +updated_by: str\n\n        +transactions: List[Transaction]\n        +snapshots: List[AssetSnapshot]\n        +tags: Set[Tag]\n\n        +current_value(at: datetime): Decimal\n        +get_currency(): str\n        +dispose(at: datetime): void\n        +add_category(category: Category): void\n        +remove_category(category: Category): void\n    }\n\n    class Transaction {\n        +id: UUID\n        +type: str\n        +quantity: Decimal\n        +unit_price: Decimal\n        +currency: str\n        +occurred_at: datetime\n    }\n\n    class AssetSnapshot {\n        +id: UUID\n        +value: Decimal\n        +observed_at: datetime\n\n        +get_currency(): str\n    }\n\n    class PortfolioSnapshot {\n        +id: UUID\n        +value: Decimal\n        +observed_at: datetime\n\n        +get_currency(): str\n    }\n\n    class Tag {\n        +id: UUID\n        +name: str\n    }\n\n    Portfolio \"1\" --&gt; \"*\" Asset : owns\n    Portfolio \"1\" --&gt; \"*\" PortfolioSnapshot : tracks\n    Asset \"*\" --&gt; \"1\" AssetType : typed_as\n    Asset \"*\" --&gt; \"1\" Portfolio : belongs_to\n    Asset \"*\" --&gt; \"*\" Category : categorized_as\n    Asset \"1\" --&gt; \"*\" Transaction : has\n    Asset \"1\" --&gt; \"*\" AssetSnapshot : has\n    Asset \"*\" --&gt; \"*\" Tag : tagged_with\n    Category \"1\" --&gt; \"*\" Category : parent_of</code></pre>"},{"location":"DataModel/#transaction-types","title":"Transaction Types","text":"<ul> <li><code>ACQUIRE</code>: Buying/receiving an asset (increases quantity)</li> <li><code>DISPOSE</code>: Selling/giving away an asset (decreases quantity)</li> <li><code>ADJUST</code>: Manual correction/adjustment</li> </ul>"},{"location":"Features/","title":"\u2728 Features","text":""},{"location":"Features/#universal-asset-tracking","title":"Universal Asset Tracking","text":"<p>Track any asset type with a flexible data model:</p> <ul> <li>Financial instruments (cash, stocks, bonds, crypto). </li> <li>Physical collections (LEGO, books, art). </li> <li>Real estate (properties, rentals). </li> <li>Personal property (wardrobe, furniture, household items, electronics). </li> <li>Liabilities (mortgages, loans). </li> </ul>"},{"location":"Features/#flexible-organization","title":"Flexible Organization","text":"<p>WordPress-style categories (many-to-many) plus hierarchical structure.</p> <ul> <li>Hierarchical: <code>Real Estate &gt; Residential &gt; Apartments</code></li> <li>Cross-cutting: <code>Income Generating Assets</code>, <code>Primary Residence</code></li> <li>Tags for additional metadata: <code>paris</code>, <code>vintage</code>, <code>collectible</code></li> </ul>"},{"location":"Features/#value-tracking","title":"Value Tracking","text":"<p>Monitor asset values over time with snapshots and transaction history. </p> <ul> <li>Balance Snapshots - Record values at any point in time</li> <li>Transaction History - Track acquisitions, disposals, and changes</li> <li>Portfolio Overview - See total value across all asset types</li> <li>Growth Visualization - Understand how your wealth evolves</li> </ul>"},{"location":"Features/#portfolio-overview","title":"Portfolio Overview","text":"<p>See your complete net worth across all asset types</p>"},{"location":"Features/#budgeting-and-planning","title":"Budgeting and Planning","text":"<p>Plan for the future with budgeting tools and goal tracking.</p>"},{"location":"MentalModel/","title":"Mental Model","text":""},{"location":"MentalModel/#mental-model-wordpress-style-classification-system","title":"Mental Model \u2014 WordPress-Style Classification System","text":"<p>Asset management system uses a two-layer approach inspired by WordPress:</p>"},{"location":"MentalModel/#layer-1-asset-type-accounting-classification","title":"Layer 1: Asset Type (Accounting Classification)","text":"<p>Purpose: High-level financial/accounting categorization Cardinality: ~10/15 types maximum Relationship: Many-to-one (each asset has exactly ONE type) Examples: - CHECKING ACCOUNTS - SAVINGS_ACCOUNTS - CASH - REAL_ESTATE - STOCKS &amp; FUNDS - CRYPTO - LOANS - BUSINESS_OWNERSHIP - PERSONAL_PROPERTY</p> <p>Think of it as: \"What type of asset is this for accounting/tax purposes?\"</p>"},{"location":"MentalModel/#layer-2-categories-wordpress-style-many-to-many","title":"Layer 2: Categories (WordPress-Style, Many-to-Many)","text":"<p>Purpose: Flexible, multi-dimensional organization Cardinality: Unlimited, user-defined hierarchy Relationship: Many-to-many (each asset can belong to MULTIPLE categories) Structure: Hierarchical (parent/child relationships via <code>parent_id</code>)</p> <p>Examples:</p>"},{"location":"MentalModel/#hierarchical-categories","title":"Hierarchical Categories","text":"<ul> <li>Clothing &gt; T-Shirts &gt; Summer T-Shirts</li> <li>Real Estate &gt; Residential &gt; Apartments &gt; Paris</li> <li>Furniture &gt; Dining &gt; Wooden Chairs</li> <li>Toys &gt; Building Sets &gt; LEGO &gt; Star Wars</li> </ul>"},{"location":"MentalModel/#cross-cutting-categories","title":"Cross-Cutting Categories","text":"<ul> <li>Income Generating Assets</li> <li>Primary Residence</li> <li>Athletic Wear</li> <li>Collectibles &gt; Investment Grade</li> <li>Multi-Purpose Items</li> <li>Office Equipment</li> </ul> <p>Think of it as: \"What organizational buckets does this belong to?\" (Answer: potentially many!)</p>"},{"location":"MentalModel/#layer-3-tags-flat-labels","title":"Layer 3: Tags (Flat Labels)","text":"<p>Purpose: Additional metadata and filtering Cardinality: Unlimited, user-defined Relationship: Many-to-many (each asset can have MANY tags) Structure: Flat (no hierarchy)</p> <p>Examples: - summer, cotton, breathable - paris, airbnb, sold - star_wars, vintage, unopened - wood, stackable, versatile</p> <p>Think of it as: \"What additional attributes describe this?\"</p>"},{"location":"MentalModel/#wordpress-category-logic","title":"WordPress Category Logic","text":"<p>Just like WordPress posts, your assets can belong to multiple categories simultaneously:</p>"},{"location":"MentalModel/#example-summer-t-shirts","title":"Example: Summer T-Shirts","text":"<p>\u2705 Clothing &gt; T-Shirts (hierarchical path) \u2705 Athletic Wear (functional category) \u2705 Casual Wear (style category)</p>"},{"location":"MentalModel/#example-paris-apartment","title":"Example: Paris Apartment","text":"<p>\u2705 Real Estate &gt; Residential &gt; Apartments (hierarchical path) \u2705 Primary Residence (legal classification) \u2705 Income Generating Assets (financial classification)</p>"},{"location":"MentalModel/#example-lego-set","title":"Example: LEGO Set","text":"<p>\u2705 Toys &gt; Building Sets &gt; LEGO (hierarchical path) \u2705 Collectibles &gt; Investment Grade (purpose) \u2705 Kids Room Items (location)</p>"},{"location":"MentalModel/#why-many-to-many-categories","title":"Why Many-to-Many Categories?","text":"Scenario Single Category (Old Model) Multiple Categories (WordPress Model) Apartment used as home + rental Must choose ONE: \"Primary Residence\" OR \"Rental\" BOTH: \"Primary Residence\" AND \"Income Generating Assets\" T-shirts for sports + casual Must choose ONE path BOTH: \"Clothing &gt; T-Shirts\" AND \"Athletic Wear\" AND \"Casual Wear\" LEGO as toy + investment Must choose ONE purpose BOTH: \"Toys &gt; LEGO\" AND \"Collectibles\" <p>Benefit: Assets can be organized from multiple perspectives without duplication.</p>"},{"location":"MentalModel/#how-this-works-in-practice","title":"How This Works in Practice","text":""},{"location":"MentalModel/#creating-an-asset","title":"Creating an Asset","text":"<pre><code>Asset: \"Summer T-Shirts\"\nAsset Type: PERSONAL_PROPERTY (choose ONE)\nCategories: \n  \u2713 Clothing &gt; T-Shirts\n  \u2713 Athletic Wear\n  \u2713 Casual Wear\n  (select as many as needed)\nTags: summer, cotton, breathable\n</code></pre>"},{"location":"MentalModel/#querying-assets","title":"Querying Assets","text":"<p>Filter by \"Athletic Wear\" \u2192 Returns: - Summer T-Shirts - Running Shoes - Yoga Mat</p> <p>Filter by \"Clothing &gt; T-Shirts\" \u2192 Returns: - Summer T-Shirts - Winter T-Shirts - Designer T-Shirts</p> <p>Filter by \"Income Generating Assets\" \u2192 Returns: - Paris Apartment - Rental Property Barcelona - Vending Machine</p> <p>Filter by both \"Clothing &gt; T-Shirts\" AND \"Athletic Wear\" \u2192 Returns: - Summer T-Shirts (intersection)</p>"},{"location":"MentalModel/#category-hierarchy","title":"Category Hierarchy","text":"<p>Categories can have parent/child relationships just like WordPress: <pre><code>Real Estate (parent)\n\u251c\u2500\u2500 Residential (child)\n\u2502   \u251c\u2500\u2500 Apartments (grandchild)\n\u2502   \u2514\u2500\u2500 Houses (grandchild)\n\u2514\u2500\u2500 Commercial (child)\n    \u251c\u2500\u2500 Office Buildings (grandchild)\n    \u2514\u2500\u2500 Retail Spaces (grandchild)\n</code></pre></p> <p>An asset can belong to: - Just \"Real Estate\" (parent only) - \"Real Estate\" AND \"Residential &gt; Apartments\" (parent + full path) - \"Residential &gt; Apartments\" AND \"Income Generating Assets\" (hierarchy + cross-cutting)</p>"},{"location":"MentalModel/#comparison-table","title":"Comparison Table","text":"Feature Asset Type Categories Tags Control Controlled vocabulary User-defined Complete freedom Structure Flat list Tree hierarchy Flat labels Per Asset Exactly 1 0 to many 0 to many Purpose Accounting/tax Organization/navigation Filtering/metadata Relationship Many-to-one Many-to-many Many-to-many Hierarchy No Yes (parent_id) No"},{"location":"MentalModel/#key-principles","title":"Key Principles","text":"<ol> <li>Asset Type = Legal/Accounting classification (required, singular, stable)</li> <li>Categories = Organizational flexibility (optional, multiple, hierarchical)</li> <li>Tags = Descriptive metadata (optional, multiple, flat)</li> </ol> <p>This gives you: - \u2705 Precision (Asset Type for accounting) - \u2705 Flexibility (Multiple categories per asset) - \u2705 Discoverability (Find assets from multiple angles) - \u2705 Simplicity (WordPress-familiar model)</p>"},{"location":"MentalModel/#wordpress-comparison","title":"WordPress Comparison","text":"Feature WordPress Your Model Posts/Assets Posts Assets Post Type Post, Page, Custom Asset Type Categories Many-to-many + hierarchy Many-to-many + hierarchy \u2713 Tags Many-to-many, flat Many-to-many, flat \u2713 <p>Your model = WordPress categories + Asset Type for accounting structure</p> <p>This is the most flexible approach while maintaining clear accounting boundaries via Asset Type.</p>"},{"location":"Names/","title":"Names","text":"<p>Rootstock stax inventree trove folium Ramify silva cultivar cambium radix summa strata</p>"},{"location":"QuickStart/","title":"\ud83d\ude80 Quick Start Guide","text":"<p>Welcome to the Strata Developer Docs!</p> <p>This guide helps you set up and run the backend, and gives you a fast overview of the core concepts.</p>"},{"location":"QuickStart/#run-strata-app","title":"Run Strata App","text":""},{"location":"QuickStart/#prerequisites","title":"Prerequisites","text":"<ul> <li>Docker &amp; Docker Compose (recommended)</li> <li>OR Python 3.12+ with Poetry</li> </ul>"},{"location":"QuickStart/#run-with-docker-option-1-recommended","title":"Run with Docker (Option 1: Recommended)","text":"<pre><code># Clone the repository\ngit clone &lt;repository-url&gt;\ncd strata\n\n# Start the application with Docker Compose\ndocker-compose up\n\n# Backend API: http://localhost:8000\n# MkDocs Documentation: http://localhost:8001\n</code></pre> <p>The backend will automatically run database migrations on startup.</p>"},{"location":"QuickStart/#run-with-poetry-option-2","title":"Run with Poetry (Option 2)","text":"<pre><code># Clone the repository\ngit clone &lt;repository-url&gt;\ncd strata/backend\n\n# Install dependencies\npoetry install\n\n# Activate virtual environment\npoetry shell\n\n# Run persistence migrations\npoetry run alembic upgrade head\n\n# Start the FastAPI server\npoetry run uvicorn app.main:app --host 0.0.0.0 --port 8000 --reload\n</code></pre>"},{"location":"QuickStart/#access-points","title":"Access Points","text":"<ul> <li>Backend API: http://localhost:8000</li> <li>API Documentation: http://localhost:8000/swagger</li> <li>MkDocs Documentation: http://localhost:8001 (if running with Docker)</li> </ul>"},{"location":"QuickStart/#database-migrations","title":"Database &amp; Migrations","text":""},{"location":"QuickStart/#sqlite","title":"SQLite","text":"<p>Strat App currently uses an SQLite database</p>"},{"location":"QuickStart/#alembic","title":"Alembic","text":"<p>Strat App uses Alembic for database migrations.</p>"},{"location":"QuickStart/#quick-checks","title":"Quick checks","text":"<p>Verify resolved DB path:</p> <pre><code>docker-compose exec -T backend python -c \"import os; print(os.path.join(os.getcwd(), '.data', 'strata.db'))\"\n</code></pre> <p>Inspect tables:</p> <pre><code>docker-compose exec -T backend sqlite3 /app/.data/strata.db \".tables\"\n</code></pre>"},{"location":"QuickStart/#contributing","title":"\ud83e\udd1d Contributing","text":"<p>Contributions are welcome! Please feel free to submit issues or pull requests.</p>"},{"location":"StrataApp/","title":"Strata App Overview","text":""},{"location":"StrataApp/#strata-app","title":"\ud83d\udcd6 Strata App","text":"<p>Your stuff. Organized.</p> <p>Strata App is your universal asset tracking solution that helps you:</p> <ul> <li>\ud83d\uddc2\ufe0f Organize everything you own - from investment portfolios to LEGO collections</li> <li>\ud83d\udcb0 Track values and net worth over time</li> <li>\ud83c\udff7\ufe0f Organize assets into flexible categories and tags</li> <li>\ud83d\udcca See your complete portfolio in one place</li> <li>\ud83d\udcc8 Budget and track expenses </li> </ul>"},{"location":"StrataApp/#who-is-strata-for","title":"\ud83c\udfaf Who Is Strata For?","text":""},{"location":"StrataApp/#investors","title":"Investors","text":"<p>Track your complete portfolio across multiple asset classes:</p> <ul> <li>Stocks, bonds, ETFs across multiple brokers</li> <li>Real estate properties and valuations</li> <li>Crypto holdings</li> <li>Checking accounts</li> <li>Savings accounts</li> <li>See total net worth in one view</li> </ul>"},{"location":"StrataApp/#collectors","title":"Collectors","text":"<p>Catalog any collection:</p> <ul> <li>LEGO sets with acquisition costs and current values</li> <li>Book collections with metadata</li> <li>Art and vintage items</li> <li>Any collection you can imagine</li> <li>Track appreciation and total collection value</li> </ul>"},{"location":"StrataApp/#homeowners","title":"Homeowners","text":"<p>Manage household inventory and valuations:</p> <ul> <li>Furniture and appliances</li> <li>Electronics and equipment</li> <li>Heirlooms and valuables</li> </ul>"},{"location":"StrataApp/#fashion-enthusiasts","title":"Fashion enthusiasts","text":"<p>Organize your style:</p> <ul> <li>Categorize by type, season, occasion</li> <li>Track purchase prices and current values</li> <li>Identify what you actually wear</li> <li>Make informed purchasing decisions</li> </ul>"},{"location":"StrataApp/#anyone","title":"Anyone...","text":"<p>... who wants to know what they own and what it's worth</p>"},{"location":"StrataApp/#what-makes-strata-different","title":"\u2728 What Makes Strata Different?","text":"<p>Not just finance. Everything.</p> <p>Most apps force you to choose: track investments OR manage collections. Strata tracks it all:</p> <ul> <li>\ud83d\udcb0 Financial Assets - Stocks, crypto, real estate, cash accounts</li> <li>\ud83c\udfa8 Collections - LEGO, books, art, vintage items, memorabilia  </li> <li>\ud83d\udc55 Personal Items - Wardrobe, furniture, electronics, household inventory</li> <li>\ud83d\udcca Complete Picture - See your total net worth across ALL asset types</li> </ul>"},{"location":"StrataApp/#core-concepts","title":"\ud83d\udca1 Core Concepts","text":""},{"location":"StrataApp/#asset-types","title":"Asset Types","text":"<p>Asset Types define the nature of what you own:</p> <ul> <li><code>CHECKING_ACCOUNTS</code></li> <li><code>SAVINGS_ACCOUNTS</code></li> <li><code>CASH</code></li> <li><code>REAL_ESTATE</code></li> <li><code>LOAN</code></li> <li><code>STOCKS &amp; FUNDS</code></li> <li><code>CRYPTO</code></li> <li><code>PERSONAL_ITEMS</code></li> <li><code>COLLECTIONS</code></li> <li><code>OTHER</code></li> <li>any custom type you want to create.</li> </ul>"},{"location":"StrataApp/#categories-many-to-many","title":"Categories (Many-to-Many)","text":"<p>Flexible organization - assets can belong to multiple categories:</p> <ul> <li>Hierarchical: <code>Clothing &gt; T-Shirts &gt; Summer</code></li> <li>Cross-cutting: <code>Athletic Wear</code>, <code>Income Generating Assets</code></li> </ul>"},{"location":"StrataApp/#tags","title":"Tags","text":"<p>Additional metadata for filtering:</p> <p><code>summer</code>, <code>vintage</code>, <code>paris</code>, <code>collectible</code></p>"},{"location":"StrataApp/#philosophy","title":"\ud83c\udfa8 Philosophy","text":"<p>\"Your wealth isn't just money - it's everything you value.\"</p> <p>Strata believes that:</p> <ul> <li>Tracking should be universal (not just finance)</li> <li>Organization should be flexible (multiple perspectives)</li> <li>Data should be beautiful (not just functional)</li> <li>The complete picture matters (assets + liabilities = net worth)</li> </ul>"},{"location":"StrataApp/#quick-start-guide","title":"\ud83d\ude80 Quick Start Guide","text":"<ol> <li>Add Your First Asset - Create a bank account, investment, or collectible</li> <li>Organize with Categories - Create hierarchical categories or use cross-cutting ones</li> <li>Track Value - Add balance snapshots to monitor growth over time</li> <li>See Your Portfolio - View total value across all your assets</li> </ol>"},{"location":"StrataApp/#explore","title":"Explore","text":"<ul> <li>\ud83e\udde0 Mental Model</li> <li>\ud83d\udcdd Use Case Examples</li> </ul>"},{"location":"TechStack/","title":"\ud83d\udee0\ufe0f Tech Stack","text":""},{"location":"TechStack/#backend","title":"Backend","text":"<ul> <li>Python 3.12+</li> <li>FastAPI (API framework)</li> <li>SQLAlchemy (ORM)</li> <li>Alembic (migrations)</li> <li>Pydantic (validation)</li> <li>Uvicorn (ASGI server)</li> </ul>"},{"location":"TechStack/#database","title":"Database","text":"<ul> <li>SQLite (default, easy setup)</li> <li>PostgreSQL support available</li> </ul>"},{"location":"TechStack/#infrastructure","title":"Infrastructure","text":"<ul> <li>Docker &amp; Docker Compose</li> <li>Poetry (dependency management)</li> </ul>"},{"location":"TechStack/#architecture","title":"Architecture","text":"<ul> <li>Hexagonal (Ports &amp; Adapters)</li> <li>Domain-Driven Design principles</li> <li>Clean separation of concerns</li> </ul>"},{"location":"UseCases/","title":"Use Cases","text":"<p>This page illustrates the Asset data model with concrete, real-life examples.</p>"},{"location":"UseCases/#examples","title":"Examples","text":""},{"location":"UseCases/#1checking-account","title":"1.Checking Account","text":""},{"location":"UseCases/#scenario","title":"Scenario","text":"<p>You manually track your checking account balance.</p>"},{"location":"UseCases/#asset","title":"Asset","text":"Field Value Name Checking Account Asset Type CASH Categories Bank Accounts, Liquid Assets Quantity null Disposed false Tags liquidity, emergency_fund"},{"location":"UseCases/#transactions","title":"Transactions","text":"<p>No transactions (manual tracking only for now).</p>"},{"location":"UseCases/#balance-snapshots","title":"Balance Snapshots","text":"Snapshot Date Value Currency Source 2024-01-01 10,000 EUR manual 2024-02-01 10,450 EUR manual 2024-03-01 9,800 EUR manual <p>Portfolio Valuation Rule: Use the latest balance snapshot (\u20ac9,800).</p>"},{"location":"UseCases/#2wardrobe","title":"2.Wardrobe","text":""},{"location":"UseCases/#scenario_1","title":"Scenario","text":"<p>You track your summer t-shirt collection. These t-shirts are both casual wear AND part of your workout clothes.</p>"},{"location":"UseCases/#asset_1","title":"Asset","text":"Field Value Name Summer T-Shirts Collection Asset Type PERSONAL_PROPERTY Categories Clothing &gt; T-Shirts, Athletic Wear, Casual Wear Quantity 15 Disposed false Tags summer, cotton, breathable"},{"location":"UseCases/#transactions_1","title":"Transactions","text":"Date Type Quantity Unit Price Currency 2020-06-01 ACQUIRE 10 25 EUR 2023-08-15 ACQUIRE 5 30 EUR"},{"location":"UseCases/#balance-snapshots_1","title":"Balance Snapshots","text":"Snapshot Date Value Currency Source 2024-01-01 225 EUR manual <p>Asset belongs to THREE categories simultaneously</p> <ul> <li>Clothing &gt; T-Shirts (hierarchy path)</li> <li>Athletic Wear (cross-cutting category)</li> <li>Casual Wear (cross-cutting category)</li> </ul> <p>Total acquisition cost: \u20ac400 (10\u00d725 + 5\u00d730) Current value: \u20ac225 (depreciation tracked via snapshot)</p>"},{"location":"UseCases/#3real-estate","title":"3.Real Estate","text":""},{"location":"UseCases/#scenario_2","title":"Scenario","text":"<p>You buy an apartment that serves as both your primary residence AND a rental investment (you rent out one room on Airbnb).</p>"},{"location":"UseCases/#asset_2","title":"Asset","text":"Field Value Name Apartment Paris 11th Asset Type REAL_ESTATE Categories Real Estate &gt; Residential &gt; Apartments, Primary Residence, Income Generating Assets Quantity 1 Disposed true Tags paris, airbnb, partial_rental, sold"},{"location":"UseCases/#transactions_2","title":"Transactions","text":"Date Type Quantity Unit Price Currency 2015-05-10 ACQUIRE 1 300,000 EUR 2023-09-20 DISPOSE 1 420,000 EUR"},{"location":"UseCases/#balance-snapshots-historical","title":"Balance Snapshots (Historical)","text":"Snapshot Date Value Currency Source 2018-01-01 330,000 EUR manual 2021-01-01 380,000 EUR manual <p>Asset belongs to THREE categories simultaneously</p> <ul> <li>Real Estate &gt; Residential &gt; Apartments (hierarchy path)</li> <li>Primary Residence (legal classification)</li> <li>Income Generating Assets (functional classification)</li> </ul> <p>Realized gain: \u20ac120,000 (\u20ac420k - \u20ac300k)</p>"},{"location":"UseCases/#4-lego-set","title":"4. LEGO Set","text":""},{"location":"UseCases/#scenario_3","title":"Scenario","text":"<p>You found a LEGO Star Wars set at home. It's both a collectible investment AND part of your children's toy collection.</p>"},{"location":"UseCases/#asset_3","title":"Asset","text":"Field Value Name LEGO Star Wars Millennium Falcon Asset Type PERSONAL_PROPERTY Categories Toys &gt; Building Sets &gt; LEGO, Collectibles &gt; Investment Grade, Kids Room Items Quantity 1 Disposed false Tags star_wars, vintage, unopened, appreciating"},{"location":"UseCases/#transactions_3","title":"Transactions","text":"Date Type Quantity Unit Price Currency 2022-08-15 ACQUIRE 1 0 EUR"},{"location":"UseCases/#balance-snapshots_2","title":"Balance Snapshots","text":"Snapshot Date Value Currency Source 2024-01-01 350 EUR manual <p>Acquisition price: \u20ac0 (found item) Current market value: \u20ac350</p>"},{"location":"UseCases/#5-household-furniture","title":"5. Household Furniture","text":"<p>Useful with bulk items.</p>"},{"location":"UseCases/#scenario_4","title":"Scenario","text":"<p>You own 10 identical wooden chairs that serve multiple purposes: dining, office workspace, and guest seating.</p>"},{"location":"UseCases/#asset_4","title":"Asset","text":"Field Value Name Wooden Dining Chairs Asset Type PERSONAL_PROPERTY Categories Home &gt; Furniture &gt; Dining, Office Equipment, Multi-Purpose Items Quantity 10 Disposed false Tags wood, stackable, versatile"},{"location":"UseCases/#transactions_4","title":"Transactions","text":"Date Type Quantity Unit Price Currency 2020-06-01 ACQUIRE 10 40 EUR"},{"location":"UseCases/#balance-snapshots_3","title":"Balance Snapshots","text":"Snapshot Date Value Currency Source 2024-01-01 300 EUR manual <p>Asset belongs to THREE categories simultaneously</p> <ul> <li>Home &gt; Furniture &gt; Dining (primary use)</li> <li>Office Equipment (secondary use)</li> <li>Multi-Purpose Items (functional classification)</li> </ul> <p>Total acquisition cost: \u20ac400 (10\u00d740) Current value: \u20ac300 (25% depreciation)</p>"},{"location":"UseCases/#6-mortgage-loan-liability","title":"6. Mortgage Loan (Liability)","text":""},{"location":"UseCases/#scenario_5","title":"Scenario","text":"<p>You have a mortgage loan on your primary residence. This is a liability (negative asset).</p>"},{"location":"UseCases/#asset_5","title":"Asset","text":"Field Value Name Mortgage - Paris Apartment Asset Type LOAN Categories Liabilities &gt; Real Estate Loans, Long-Term Debt Quantity null Disposed false Tags mortgage, primary_residence, fixed_rate"},{"location":"UseCases/#transactions_5","title":"Transactions","text":"Date Type Quantity Unit Price Currency Notes 2015-05-10 ACQUIRE 1 -250,000 EUR Initial loan 2016-01-01 DISPOSE 1 5,000 EUR Principal payment 2017-01-01 DISPOSE 1 5,200 EUR Principal payment 2018-01-01 DISPOSE 1 5,400 EUR Principal payment"},{"location":"UseCases/#balance-snapshots_4","title":"Balance Snapshots","text":"Snapshot Date Value Currency Source Notes 2024-01-01 -220,000 EUR manual Remaining debt 2024-02-01 -219,500 EUR manual After payment <p>Key Points</p> <ul> <li>Initial acquisition is negative (-\u20ac250,000 = you owe this)</li> <li>DISPOSE transactions are positive (principal payments reduce the debt)</li> <li>Balance snapshots are negative (current debt owed)</li> <li>Portfolio valuation: This subtracts from total net worth</li> </ul>"},{"location":"UseCases/#liabilities","title":"Liabilities","text":"<p>Liabilities are assets with negative values:</p> Asset Type Typical Balance Portfolio Impact CASH Positive Increases net worth REAL_ESTATE Positive Increases net worth LOAN Negative Decreases net worth CREDIT_CARD Negative Decreases net worth MORTGAGE Negative Decreases net worth <p>Portfolio Calculation:</p> <pre><code>Net Worth = Sum of all asset balances (positive + negative)\n\nExample:\n  Checking Account:     +\u20ac10,000\n  Paris Apartment:     +\u20ac420,000\n  Mortgage Loan:       -\u20ac220,000\n  \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n  Net Worth:           +\u20ac210,000\n</code></pre>"},{"location":"UseCases/#transaction-logic","title":"Transaction Logic","text":"<p>For a LOAN asset:</p> <ul> <li><code>ACQUIRE</code> with negative unit_price = Taking out a loan (you owe money)</li> <li><code>DISPOSE</code> with positive unit_price = Paying off principal (reducing debt)</li> </ul> <p>Example Flow:</p> <pre><code>2015-05-10: ACQUIRE 1 \u00d7 -\u20ac250,000 = -\u20ac250,000 (loan originated)\n2016-01-01: DISPOSE 1 \u00d7 +\u20ac5,000   = -\u20ac245,000 (paid \u20ac5k principal)\n2017-01-01: DISPOSE 1 \u00d7 +\u20ac5,200   = -\u20ac239,800 (paid \u20ac5.2k principal)\n</code></pre>"},{"location":"UseCases/#complete-picture","title":"Complete Picture","text":"<p>Assets (Positive):</p> <ul> <li>Checking Account: \u20ac10,000</li> <li>Paris Apartment: \u20ac420,000</li> </ul> <p>Liabilities (Negative):</p> <ul> <li>Mortgage Loan: -\u20ac220,000</li> <li>Credit Card: -\u20ac2,000</li> </ul> <p>Net Worth:</p> <p>\u20ac10,000 + \u20ac420,000 - \u20ac220,000 - \u20ac2,000 = \u20ac208,000</p> <p>This is tracked in Portfolio Snapshots.</p>"},{"location":"UseCases/#portfolio-example","title":"Portfolio Example","text":"<p>All assets combined into a portfolio view.</p>"},{"location":"UseCases/#portfolio-my-personal-wealth","title":"Portfolio: \"My Personal Wealth\"","text":"Asset Name Asset Type Categories Current Value Currency Checking Account CASH Bank Accounts, Liquid Assets 9,800 EUR Summer T-Shirts PERSONAL_PROPERTY Clothing &gt; T-Shirts, Athletic Wear, Casual Wear 225 EUR Apartment Paris REAL_ESTATE Residential &gt; Apartments, Primary Residence, Income Generating 0 EUR LEGO Millennium Falcon PERSONAL_PROPERTY Toys &gt; LEGO, Collectibles, Kids Room 350 EUR Wooden Chairs PERSONAL_PROPERTY Furniture &gt; Dining, Office Equipment, Multi-Purpose 300 EUR"},{"location":"UseCases/#portfolio-snapshot","title":"Portfolio Snapshot","text":"Snapshot Date Total Value Currency 2024-01-01 10,675 EUR <p>Apartment is disposed (sold), so its current value is \u20ac0 in the portfolio.</p>"},{"location":"UseCases/#category-in-action","title":"Category in Action","text":"<p>Categories let you organize and filter assets.</p> <p>Asset belongs to THREE categories simultaneously</p> <ul> <li>Toys &gt; Building Sets &gt; LEGO (what it is)</li> <li>Collectibles &gt; Investment Grade (how you treat it)</li> <li>Kids Room Items (where it's stored)</li> </ul> <p>Filtering by \"Income Generating Assets\"</p> <ul> <li>Apartment Paris 11th (partial Airbnb rental)</li> </ul> <p>Filtering by \"Multi-Purpose Items\"</p> <ul> <li>Wooden Dining Chairs (used for dining, office, guests)</li> </ul> <p>Filtering by \"Collectibles\"</p> <ul> <li>LEGO Star Wars Millennium Falcon</li> </ul> <p>One asset can appear in multiple organizational contexts without duplication.</p>"},{"location":"Validation/","title":"Validation Strategy in Hexagonal Architecture","text":"<p>In a Hexagonal (Ports &amp; Adapters) Architecture, validation is a layered responsibility. Each layer has a distinct role in ensuring data is correct, consistent, and compliant with business rules. This prevents invalid data from corrupting the application's state.</p> <p>For setup instructions, see the Quick Start guide.</p>"},{"location":"Validation/#core-philosophy","title":"Core Philosophy","text":"<p>The guiding principle is to validate as early as possible and as close to the source of the data as is appropriate for the type of validation being performed.</p> <ul> <li>Business Invariants belong in the Domain Layer.</li> <li>Input Shape &amp; Type belongs in the Incoming Adapter.</li> <li>Data Integrity belongs in the Outgoing Adapter / Database.</li> <li>Orchestration &amp; Flow belongs in the Application Layer.</li> </ul>"},{"location":"Validation/#the-validation-chain","title":"The Validation Chain","text":"<p>Here is the journey of validation for a typical request.</p>"},{"location":"Validation/#1-incoming-adapter-api-schemas-pydantic","title":"1. Incoming Adapter: API Schemas (Pydantic)","text":"<ul> <li>Responsibility: To validate the shape, data types, and presence of required fields in an incoming HTTP request payload.</li> <li>Location: <code>backend/app/adapters/incoming/api/schemas/</code></li> <li>Example: When a user sends a <code>POST</code> request to create an asset, a Pydantic schema immediately checks if <code>name</code> is a string, <code>value</code> is a float, and <code>asset_type_id</code> is a valid UUID. If validation fails, FastAPI automatically returns a <code>422 Unprocessable Entity</code> response.</li> </ul> <pre><code># In a Pydantic schema\nclass AssetCreateSchema(BaseModel):\n    name: str = Field(..., min_length=3)\n    value: float\n    asset_type_id: UUID\n</code></pre>"},{"location":"Validation/#2-application-layer-use-cases","title":"2. Application Layer: Use Cases","text":"<ul> <li>Responsibility: To handle application-specific validation and orchestrate business logic. This includes checking for the existence of entities before acting on them.</li> <li>Location: <code>backend/app/application/use_cases/</code></li> <li>Example: The <code>GetAssetUseCase</code> receives an <code>asset_id</code>. Before returning the asset, it validates that an asset with that ID actually exists. If not, it raises a domain-specific <code>AssetNotFound</code> exception. This makes the use case's contract clear: it either returns a valid <code>Asset</code> or it fails explicitly.</li> </ul> <pre><code># In GetAssetUseCase.execute()\nasset = self.asset_repository.find_by_id(asset_id)\nif asset is None:\n    raise AssetNotFound(f\"Asset with id {asset_id} not found.\")\nreturn asset\n</code></pre>"},{"location":"Validation/#3-domain-layer-entities-business-models","title":"3. Domain Layer: Entities (Business Models)","text":"<ul> <li>Responsibility: To enforce core business rules and invariants. A domain entity should be self-validating and guarantee it is always in a consistent state.</li> <li>Location: <code>backend/app/domain/entities/</code></li> <li>Example: An <code>Asset</code> entity might have a business rule that its <code>value</code> can never be negative. This logic is placed directly within the entity itself, often in <code>__post_init__</code> for dataclasses.</li> </ul> <pre><code># In domain/entities/asset.py\nfrom dataclasses import dataclass, field\n\n@dataclass\nclass Asset:\n    id: UUID\n    name: str\n    value: float\n\n    def __post_init__(self):\n        if self.value &lt; 0:\n            raise ValueError(\"Asset value cannot be negative.\")\n        if not self.name:\n            raise ValueError(\"Asset name cannot be empty.\")\n</code></pre>"},{"location":"Validation/#4-outgoing-adapter-repository-database","title":"4. Outgoing Adapter: Repository &amp; Database","text":"<ul> <li>Responsibility: To enforce final data integrity constraints at the persistence level.</li> <li>Location: <code>backend/app/adapters/outgoing/database/models/</code> (ORM Models) and the database schema itself.</li> <li>Example: The <code>assets</code> table in the database has a <code>UNIQUE</code> constraint on the <code>name</code> column. If the repository implementation tries to save an <code>AssetModel</code> with a name that already exists, the database will reject the transaction, and SQLAlchemy will raise an <code>IntegrityError</code>. The repository implementation can catch this specific error and re-raise it as a more specific domain exception, like <code>AssetNameNotUnique</code>.</li> </ul>"},{"location":"Validation/#handling-failures","title":"Handling Failures","text":"<p>Each layer handles validation failures appropriately:</p> <ul> <li>API Adapter: Catches domain exceptions (like <code>AssetNotFound</code>) from the use case and translates them into appropriate HTTP status codes (like <code>404 Not Found</code>).</li> <li>Use Case: Catches specific repository/database exceptions (like <code>AssetNameNotUnique</code>) and can decide whether to handle them or let them propagate to the API layer.</li> <li>Domain Entity: Raises exceptions (<code>ValueError</code>, <code>TypeError</code>, or custom domain exceptions) if a business rule is violated.</li> <li>Repository: Catches low-level database exceptions (<code>IntegrityError</code>) and translates them into domain-specific exceptions.</li> </ul> <p>This layered approach ensures that your core business logic is pure, protected, and completely independent of the delivery mechanism (API) and persistence technology (database).</p>"},{"location":"mermaid_template/","title":"Mermaid graphs","text":""},{"location":"mermaid_template/#example-1","title":"Example 1","text":"<pre><code>gitGraph\n  commit id: \"Debut du patrimoine\" tag: \"\ud83c\udf31 Origine\"\n  branch residence_principale\n  commit id: \"\ud83c\udfe0 Appartement Paris 15eme\" tag: \"2010-06 - 250k\u20ac\"\n  branch residence_secondaire\n  commit id: \"\ud83c\udfd6\ufe0f Maison Bretagne\" tag: \"2015-03 - 180k\u20ac\"\n  checkout main\n  merge residence_secondaire tag: \"Total: 430k\u20ac\"\n  branch eurl\n  commit id: \"\ud83c\udfe2 EURL Conseil\" tag: \"2017-09 - 50k\u20ac\"\n  branch locatif\n  commit id: \"\ud83d\udcb0 Studio Lyon\" tag: \"2019-01 - 120k\u20ac\"\n  checkout main\n  merge locatif tag: \"Total: 600k\u20ac\"\n  checkout locatif\n  commit id: \"\ud83d\udcb0 T2 Bordeaux\" tag: \"2021-06 - 200k\u20ac\"\n  checkout residence_principale\n  commit id: \"\ud83c\udfe0 Maison Neuilly\" tag: \"2023-11 - 650k\u20ac\"\n  checkout main\n  merge residence_principale tag: \"Total: 1450k\u20ac\"\n  ```\n\n## Example 2\n\n```mermaid\ngitGraph\n    commit id: \"Patrimoine\"\n    branch achat\n    commit id: \"\ud83c\udfe0 Home 150k\u20ac\"\n    checkout patrimoine\n    merge achat\n    checkout achat\n    commit id: \"\ud83c\udfe0 Holiday Home 100k\u20ac\"\n    checkout patrimoine\n    merge achat\n    checkout achat\n    commit id: \"\ud83c\udfe0 Company 200k\u20ac\"\n    checkout patrimoine\n    merge achat</code></pre>"}]}